#!/bin/sh
if [ -z "$AXIOMDEBUG" ]; then
    exit 0
fi
if [ "$AXIOMDEBUG" = 1 ]; then
    while [ "$1" ]; do
        if [ ! -f "$1" ]; then
            echo "${SPECIALPREFIX}failed:$1" 1>&2
            exit 1
        else
            echo "${SPECIALPREFIX}${1}" 1>&2
        fi
        shift
    done
fi
if [ "$AXIOMDEBUG" = 2 ]; then
    while [ "$1" ]; do
        if [ ! -f "$1" ]; then
            echo "${SPECIALPREFIX}failed:$1" 1>&2
            exit 1
        else
            if git status --porcelain "$1" | grep -q '^??'; then
                echo "${SPECIALPREFIX}failed:$1" 1>&2
            else
                echo "${SPECIALPREFIX}${1}" 1>&2
            fi
        fi
        shift
    done
fi

exit 0
